"use strict";var Eden=(()=>{var $=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var G=(t,e)=>{for(var r in e)$(t,r,{get:e[r],enumerable:!0})},H=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Z(e))!B.call(t,a)&&a!==r&&$(t,a,{get:()=>e[a],enumerable:!(n=V(e,a))||n.enumerable});return t};var U=t=>H($({},"__esModule",{value:!0}),t);var Q={};G(Q,{EdenWS:()=>w,edenTreaty:()=>z});var E=class extends Error{constructor(r,n){super(n+"");this.status=r;this.value=n}};var W=(t,e,r)=>{if(t.endsWith("/")||(t+="/"),e==="index"&&(e=""),!r||!Object.keys(r).length)return`${t}${e}`;let n="";for(let[a,s]of Object.entries(r))n+=`${a}=${s}&`;return`${t}${e}?${n.slice(0,-1)}`};var F=t=>t.trim().length!==0&&!Number.isNaN(Number(t));var R=typeof FileList>"u",L=t=>R?t instanceof Blob:t instanceof FileList||t instanceof File,_=t=>{if(!t)return!1;for(let e in t){if(L(t[e]))return!0;if(Array.isArray(t[e])&&t[e].find(r=>L(r)))return!0}return!1},v=t=>R?t:new Promise(e=>{let r=new FileReader;r.onload=()=>{let n=new File([r.result],t.name,{lastModified:t.lastModified,type:t.type});e(n)},r.readAsArrayBuffer(t)}),w=class{ws;url;constructor(e){this.ws=new WebSocket(e),this.url=e}send(e){return Array.isArray(e)?(e.forEach(r=>this.send(r)),this):(this.ws.send(typeof e=="object"?JSON.stringify(e):e.toString()),this)}on(e,r,n){return this.addEventListener(e,r,n)}off(e,r,n){return this.ws.removeEventListener(e,r,n),this}subscribe(e,r){return this.addEventListener("message",e,r)}addEventListener(e,r,n){return this.ws.addEventListener(e,a=>{if(e==="message"){let s=a.data.toString(),l=s.charCodeAt(0);if(l===47||l===123)try{s=JSON.parse(s)}catch{}else F(s)?s=+s:s==="true"?s=!0:s==="false"&&(s=!1);r({...a,data:s})}else r(a)},n),this}removeEventListener(e,r,n){return this.off(e,r,n),this}close(){return this.ws.close(),this}},K=(t,e="",r)=>new Proxy(()=>{},{get(n,a,s){return K(t,`${e}/${a.toString()}`,r)},apply(n,a,[s,l={}]=[{},{}]){let f=s!==void 0&&(typeof s!="object"||Array.isArray(s))?s:void 0,{$query:j,$fetch:M,$headers:C,$transform:m,getRaw:D,...I}=s??{};f??=I;let x=e.lastIndexOf("/"),S=e.slice(x+1).toUpperCase(),A=W(t,x===-1?"/":e.slice(0,x),Object.assign(l.query??{},j)),P=r.fetcher??fetch,p=r.transform?Array.isArray(r.transform)?r.transform:[r.transform]:void 0,T=m?Array.isArray(m)?m:[m]:void 0;return T&&(p?p=T.concat(p):p=T),S==="SUBSCRIBE"?new w(A.replace(/^([^]+):\/\//,A.startsWith("https://")?"wss://":"ws://")):(async J=>{let i,N={...r.$fetch?.headers,...M?.headers,...l.headers,...C};if(S!=="GET"&&S!=="HEAD"){i=Object.keys(f).length||Array.isArray(f)?f:void 0;let o=i&&(typeof i=="object"||Array.isArray(f));if(o&&_(i)){let h=new FormData;for(let[g,d]of Object.entries(i))if(R)h.append(g,d);else if(d instanceof File)h.append(g,await v(d));else if(d instanceof FileList)for(let y=0;y<d.length;y++)h.append(g,await v(d[y]));else if(Array.isArray(d))for(let y=0;y<d.length;y++){let O=d[y];h.append(g,O instanceof File?await v(O):O)}else h.append(g,d);i=h}else i!=null&&(N["content-type"]=o?"application/json":"text/plain",i=o?JSON.stringify(i):f)}let c=await P(A,{method:S,body:i,...r.$fetch,...l.fetch,...M,headers:N}),b;if(J.getRaw)return c;switch(c.headers.get("Content-Type")?.split(";")[0]){case"application/json":b=await c.json();break;default:b=await c.text().then(o=>F(o)?+o:o==="true"?!0:o==="false"?!1:o)}let q=c.status>=300||c.status<200?new E(c.status,b):null,k={data:b,error:q,response:c,status:c.status,headers:c.headers};if(p)for(let o of p){let u=o(k);u instanceof Promise&&(u=await u),u!=null&&(k=u)}return k})({getRaw:D})}}),z=(t,e={fetcher:fetch})=>new Proxy({},{get(r,n){return K(t,n,e)}});return U(Q);})();
